!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(t,n,o){for(var r=arguments,a=arguments.length,i=Array(a>3?a-3:0),l=3;l<a;l++)i[l-3]=r[l];if(!t)return null;if(ve(t)){o=[];for(var c=0;c<t.length;c++){var u=e(t[c]);if(u){var s=11===u.nodeType;if("string"==typeof u.rawNodeName&&s){var d;(d=o).push.apply(d,he(u.childNodes))}else o.push(u)}}return e(ge,null,o)}var f="object"===(void 0===t?"undefined":le(t));if(t&&f&&"parentNode"in t){if(n={},o=[],3===t.nodeType)o=t.nodeValue;else if(1===t.nodeType&&t.attributes.length){n={};for(var h=0;h<t.attributes.length;h++){var p=t.attributes[h],v=p.name,g=p.value;""===g&&v in t?n[v]=t[v]:n[v]=g}}if((1===t.nodeType||11===t.nodeType)&&t.childNodes.length){o=[];for(var m=0;m<t.childNodes.length;m++)o.push(e(t.childNodes[m]))}var y=e(t.nodeName,n,o);return Q.set(y,t),y}if(f)return t;i.length&&(o=[o].concat(i));var b=ie.get(),T="#text"===t,N="string"==typeof t;if(b.key="",b.rawNodeName=t,b.nodeName=N?t.toLowerCase():"#document-fragment",b.childNodes.length=0,b.nodeValue="",b.attributes={},T){var E=2===arguments.length?n:o,x=ve(E)?E.join(""):E;return b.nodeType=3,b.nodeValue=String(x||""),b}b.nodeType=t===ge||"string"!=typeof t?11:"#comment"===t?8:1;var w=ve(n)||"object"!==(void 0===n?"undefined":le(n))?n:o,k=ve(w)?w:[w];if(w&&k.length)for(var C=0;C<k.length;C++){var O=k[C];if(Array.isArray(O))for(var S=0;S<O.length;S++)b.childNodes.push(O[S]);else if(11===O.nodeType&&"string"==typeof O.rawNodeName)for(var j=0;j<O.childNodes.length;j++)b.childNodes.push(O.childNodes[j]);else O&&"object"===(void 0===O?"undefined":le(O))?b.childNodes.push(O):O&&b.childNodes.push(e("#text",null,O))}n&&"object"===(void 0===n?"undefined":le(n))&&!ve(n)&&(b.attributes=n),"script"===b.nodeName&&b.attributes.src&&(b.key=String(b.attributes.src)),b.attributes&&"key"in b.attributes&&(b.key=String(b.attributes.key));var A=b;return pe.forEach(function(e,t){(t=e(A))&&(A=t)}),A}function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,o=arguments[2],r=Q.get(e);if(r)return r;var a=e.nodeName,i=e.childNodes,l=void 0===i?[]:i;o=o||"svg"===a;var c=null;ye.forEach(function(t,n){(n=t(e))&&(c=n)}),c||(c="#text"===a?n.createTextNode(e.nodeValue):"#document-fragment"===a?n.createDocumentFragment():o?n.createElementNS(be,a):n.createElement(a)),Q.set(e,c);for(var u=0;u<l.length;u++)c.appendChild(t(l[u],n,o));return c}function n(e){return Te&&e&&e.indexOf&&e.includes("&")?(Te.innerHTML=e,Te.textContent):e}function o(e){return e.replace(/[&<>]/g,function(e){return"&#"+e.charCodeAt(0)+";"})}function r(e){Oe(e);for(var t=0;t<e.childNodes.length;t++)r(e.childNodes[t]);return e}function a(e){Se(e);for(var t=0;t<e.childNodes.length;t++)a(e.childNodes[t]);return e}function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Y.forEach(function(t){return e=t.isRendering||e}),Ce.allocated.forEach(function(e){return Ce.free.add(e)}),Ce.allocated.clear(),Q.forEach(function(e,t){Ce.protected.has(t)||Q.delete(t)})}function l(e){var t=e.state;if(t.isRendering){t.nextTransaction&&t.nextTransaction.promises[0].resolve(t.nextTransaction),t.nextTransaction=e;var n={},o=new Promise(function(e){return n.resolve=e});return o.resolve=n.resolve,e.promises=[o],e.abort()}t.isRendering=!0}function c(e){var t=e.markup,n=e.state,o=e.state.measure;if(o("should update"),"string"==typeof t&&n.markup===t)return e.abort();"string"==typeof t&&(n.markup=t),o("should update")}function u(t){var n=t.state,o=t.domNode,i=t.markup,l=t.options,c=n.previousMarkup,u=l.inner;if(c===o.outerHTML&&n.oldTree||(n.oldTree&&a(n.oldTree),n.oldTree=e(o),Q.set(n.oldTree,o),r(n.oldTree)),t.oldTree=n.oldTree,t.newTree||(t.newTree=e(i)),u){var s=t.oldTree,d=t.newTree,f=(s.rawNodeName,s.nodeName),h=s.attributes,p="string"!=typeof d.rawNodeName,v=11===d.nodeType&&!p?d.childNodes:d;t.newTree=e(f,h,v)}}function s(e,t,n){var o=arguments;e||(e=_e),t||(t=_e);e.nodeName,t.nodeName,t.nodeType;for(var r=e===_e,a={old:new Map,new:new Map},i=0;i<Me.length;i++){var l=Me[i],c=a[l],u=o[i],d=u&&u.childNodes;if(d&&d.length)for(var f=0;f<d.length;f++){var h=d[f];h.key&&c.set(h.key,h)}}Re.forEach(function(o,i){(i=o(e,t,null))&&i!==t&&(t=i,s(null,i,n));for(var l=0;l<t.childNodes.length;l++)(i=o(r?_e:e.childNodes[l],t.childNodes[l],a))&&(t.childNodes[l]=i)});var p=n=n||{SET_ATTRIBUTE:[],REMOVE_ATTRIBUTE:[],TREE_OPS:[],NODE_VALUE:[]},v=p.SET_ATTRIBUTE,g=p.REMOVE_ATTRIBUTE,m=p.TREE_OPS,y=p.NODE_VALUE,b={INSERT_BEFORE:[],REMOVE_CHILD:[],REPLACE_CHILD:[]},T=b.INSERT_BEFORE,N=b.REMOVE_CHILD,E=b.REPLACE_CHILD,x=1===t.nodeType;if("#text"===t.nodeName)return"#text"!==e.nodeName?y.push(t,t.nodeValue,null):r||e.nodeValue===t.nodeValue||(y.push(e,t.nodeValue,e.nodeValue),e.nodeValue=t.nodeValue),n;if(x){var w=r?_e:e.attributes,k=t.attributes;for(var C in k){var O=k[C];C in w&&w[C]===k[C]||(r||(w[C]=O),v.push(r?t:e,C,O))}if(!r)for(var S in w)S in k||(g.push(e,S),delete w[S])}var j=t.childNodes;if(r){for(var A=0;A<j.length;A++)s(null,j[A],n);return n}var R=e.childNodes;if(a.old.size||a.new.size){a.old.values();for(var _=0;_<j.length;_++){var M=R[_],I=j[_],D=I.key;if(M){var P=M.key,L=a.new.has(P),H=a.old.has(D);if(L||H)if(L)if(D===P)M.nodeName===I.nodeName?s(M,I,n):(E.push(I,M),e.childNodes[_]=I,s(null,I,n));else{var V=I;D&&H?(V=a.old.get(D),R.splice(R.indexOf(V),1)):D&&(V=I,s(null,I,n)),T.push(e,V,M),R.splice(_,0,V)}else N.push(M),R.splice(R.indexOf(M),1),_-=1;else E.push(I,M),R.splice(R.indexOf(M),1,I),s(null,I,n)}else T.push(e,I,null),R.push(I),s(null,I,n)}}else for(var U=0;U<j.length;U++){var B=R&&R[U],F=j[U];B?B.nodeName===F.nodeName?s(B,F,n):(E.push(F,B),e.childNodes[U]=F,s(null,F,n)):(T.push(e,F,null),R&&R.push(F),s(null,F,n))}if(r)return n;if(R.length!==j.length){for(var z=j.length;z<R.length;z++)N.push(R[z]);R.length=j.length}return(T.length||N.length||E.length)&&(T.length||(b.INSERT_BEFORE=null),N.length||(b.REMOVE_CHILD=null),E.length||(b.REPLACE_CHILD=null),m.push(b)),n}function d(e){var n=e.state.measure,o=e.oldTree,i=e.newTree;e.domNode;n("sync trees"),o.nodeName!==i.nodeName&&11!==i.nodeType?(e.patches={TREE_OPS:[{REPLACE_CHILD:[i,o]}],SET_ATTRIBUTE:[],REMOVE_ATTRIBUTE:[],NODE_VALUE:[]},a(e.oldTree),e.oldTree=e.state.oldTree=i,r(e.oldTree),Y.set(t(i),e.state)):e.patches=s(o,i),n("sync trees")}function f(e,t){X.get(e).add(t)}function h(e,t){if(!t&&e)X.get(e).clear();else if(e&&t)X.get(e).delete(t);else for(var n=0;n<Ie.length;n++)X.get(Ie[n]).clear()}function p(e){for(var t=arguments,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=t[r];var a=X.get(e),i=[];if(!a.size)return i;if("textChanged"!==e&&3===o[0].nodeType)return i;if(a.forEach(function(e){var t=e.apply(void 0,o);"object"===(void 0===t?"undefined":le(t))&&t.then&&i.push(t)}),"attached"===e||"detached"===e){var l=o[0];[].concat(he(l.childNodes)).forEach(function(t){i.push.apply(i,he(p.apply(void 0,[e,t].concat(he(o.slice(1))))))})}return i}function v(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=[],c=e.TREE_OPS,u=e.NODE_VALUE,s=e.SET_ATTRIBUTE,d=e.REMOVE_ATTRIBUTE,f=i.isSVG,h=i.ownerDocument;if(s.length)for(var v=0;v<s.length;v+=3){var g=s[v],m=s[v+1],y=n(s[v+2]),b=t(g,h,f),T=(X.get("attributeChanged"),p("attributeChanged",b,m,b.getAttribute(m),y)),N="object"===(void 0===y?"undefined":le(y)),E="function"==typeof y,x=0===m.indexOf("on")?m.toLowerCase():m;if(N||E||!x){if(N&&"style"===x)for(var w=Object.keys(y),k=0;k<w.length;k++)b.style[w[k]]=y[w[k]];else if("string"!=typeof y){b.hasAttribute(x)&&b[x]!==y&&b.removeAttribute(x,""),b.setAttribute(x,"");try{b[x]=y}catch(e){}}}else{var C=null===y||void 0===y;try{b[x]=y}catch(e){}b.setAttribute(x,C?"":y)}T.length&&l.push.apply(l,he(T))}if(d.length)for(var O=0;O<d.length;O+=2)!function(e){var t=d[e],n=d[e+1],o=Q.get(t),r=(X.get("attributeChanged"),o.getAttribute(n)),a=p("attributeChanged",o,n,r,null);a.length?(Promise.all(a).then(function(){return Pe(o,n)}),l.push.apply(l,he(a))):Pe(o,n)}(O);for(var S=0;S<c.length;S++){var j=c[S],A=j.INSERT_BEFORE,R=j.REMOVE_CHILD,_=j.REPLACE_CHILD;if(A&&A.length)for(var M=0;M<A.length;M+=3){var I=A[M],D=A[M+1],P=A[M+2],L=Q.get(I),H=P&&t(P,h,f);X.get("attached");P&&r(P);var V=t(D,h,f);r(D),L.insertBefore(V,H);var U=p("attached",V);l.push.apply(l,he(U))}if(R&&R.length)for(var B=0;B<R.length;B++)!function(e){var t=R[e],n=Q.get(t),o=(X.get("detached"),p("detached",n));o.length?(Promise.all(o).then(function(){n.parentNode.removeChild(n),a(t)}),l.push.apply(l,he(o))):(n.parentNode.removeChild(n),a(t))}(B);if(_&&_.length)for(var F=0;F<_.length;F+=2)!function(e){var n=_[e],o=_[e+1],i=Q.get(o),c=t(n,h,f);X.get("attached"),X.get("detached"),X.get("replaced");i.parentNode.insertBefore(c,i),r(n);var u=p("attached",c),s=p("detached",i),d=p("replaced",i,c),v=[].concat(he(u),he(s),he(d));v.length?(Promise.all(v).then(function(){i.parentNode.replaceChild(c,i),a(o)}),l.push.apply(l,he(v))):(i.parentNode.replaceChild(c,i),a(o))}(F)}if(u.length)for(var z=0;z<u.length;z+=3){var G=u[z],W=u[z+1],q=u[z+2],K=Q.get(G),J=(X.get("textChanged"),p("textChanged",K,q,W)),Y=K.parentNode;W.includes("&")?K.nodeValue=n(W):K.nodeValue=W,Y&&De.has(Y.nodeName.toLowerCase())&&(Y.nodeValue=o(n(W))),J.length&&l.push.apply(l,he(J))}return l}function g(e){var t=e.domNode,n=e.state,o=e.state.measure,r=e.patches,a=e.promises,i=void 0===a?[]:a;n.isSVG="svg"===e.oldTree.nodeName,n.ownerDocument=t.ownerDocument||document,o("patch node"),i.push.apply(i,he(v(r,n))),o("patch node"),e.promises=i}function m(e){var t=e.promises,n=void 0===t?[]:t;return n.length?Promise.all(n).then(function(){return e.end()}):Promise.resolve(e.end())}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.inner=!0,n.tasks=n.tasks||Le,Ve.create(e,t,n).start()}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.inner=!1,n.tasks=n.tasks||Le,Ve.create(e,t,n).start()}function T(e){var t=Y.get(e);t&&t.oldTree&&a(t.oldTree),Y.delete(e),i()}function N(e){var t=e.subscribe,n=e.unsubscribe,o=e.createTreeHook,r=e.createNodeHook,a=e.syncTreeHook;return Z.add(e),t&&e.subscribe(),o&&Ue.add(o),r&&Be.add(r),a&&Fe.add(a),function(){Z.delete(e),n&&n(),Ue.delete(o),Be.delete(r),Fe.delete(a)}}function E(e,t){"function"==typeof e?e(t):"string"==typeof e&&this[e](t)}function x(e){e.attributes.ref&&E(e.attributes.ref,Ze.get(e)),e.childNodes.forEach(x)}function w(e){Xe.has(e)&&Xe.get(e).componentDidMount();var t=Xe.get(e);x(e),t&&E(t.props.ref,t)}function k(e){Xe.has(e)&&Xe.get(e).componentDidUnmount();var t=Xe.get(e);x(e),t&&E(t.props.ref,null)}function C(e){return e.onceEnded(function(){var t=e.patches;t.TREE_OPS&&t.TREE_OPS.length&&t.TREE_OPS.forEach(function(e){var t=e.INSERT_BEFORE,n=e.REPLACE_CHILD,o=e.REMOVE_CHILD;if(t)for(var r=0;r<t.length;r+=3)w(t[r+1]);if(n)for(var a=0;a<n.length;a+=2)w(n[a]);if(o)for(var i=0;i<o.length;i+=1)k(o[i])})})}function O(e){var t=this;this.state=rt({},this.state,e),!ot.has(this)&&this.shouldComponentUpdate()&&(this[nt](),ot.set(this,setTimeout(function(){ot.delete(t),t.shouldComponentUpdate()&&t[nt]()})))}function S(){this[nt]()}function j(e){var t=gt.call(e,yt),n=e[yt];try{e[yt]=void 0;var o=!0}catch(e){}var r=mt.call(e);return o&&(t?e[yt]=n:delete e[yt]),r}function A(e){return bt.call(e)}function R(e){return null==e?void 0===e?Nt:Tt:Et&&Et in Object(e)?j(e):A(e)}function _(e){return null!=e&&"object"==(void 0===e?"undefined":le(e))}function M(e){if(!_(e)||R(e)!=wt)return!1;var t=xt(e);if(null===t)return!0;var n=St.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ot.call(n)==jt}function I(e,t,n){function o(){h===f&&(h=f.slice())}function r(){return d}function a(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),h.push(e),function(){if(t){t=!1,o();var n=h.indexOf(e);h.splice(n,1)}}}function i(e){if(!M(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,d=s(d,e)}finally{p=!1}for(var t=f=h,n=0;n<t.length;n++)t[n]();return e}function l(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,i({type:Rt.INIT})}function c(){var e,t=a;return e={subscribe:function(e){function n(){e.next&&e.next(r())}if("object"!==(void 0===e?"undefined":le(e)))throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[At]=function(){return this},e}var u;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(I)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var s=e,d=t,f=[],h=f,p=!1;return i({type:Rt.INIT}),u={dispatch:i,subscribe:a,getState:r,replaceReducer:l},u[At]=c,u}function D(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function P(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:Rt.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Rt.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function L(){for(var e=arguments,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=e[o];if(0===n.length)return function(e){return e};if(1===n.length)return n[0];var r=n[n.length-1],a=n.slice(0,-1);return function(){return a.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}function H(e){return{type:Mt,title:e}}function V(e){return{type:It,key:e}}function U(e,t){return{type:Dt,key:e,completed:t}}function B(e){return{type:Pt,key:e}}function F(e,t){return{type:Lt,key:e,title:t}}function z(){return{type:Ht}}function G(e){return{type:Vt,completed:e}}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments[1];switch(t.type){case Mt:return t.title?Ut({},e,{todos:e.todos.concat({completed:!1,editing:!1,title:t.title.trim(),key:Bt()})}):e;case It:return Ut({},e,{todos:e.todos.filter(function(e){return e.key!==t.key})});case Dt:var n=e.todos.findIndex(function(e){return e.key===t.key}),o=e.todos[n];return e.todos[n]=Ut({},o,{completed:t.completed}),Ut({},e,{todos:[].concat(he(e.todos))});case Pt:var r=e.todos.findIndex(function(e){return e.key===t.key}),a=e.todos[r];return e.todos[r]=Ut({},a,{editing:!0}),Ut({},e,{todos:[].concat(he(e.todos))});case Lt:var i=e.todos.findIndex(function(e){return e.key===t.key}),l=e.todos[i];return e.todos[i]=Ut({},l,{title:t.title,editing:!1}),Ut({},e,{todos:[].concat(he(e.todos))});case Ht:return Ut({},e,{todos:e.todos.filter(function(e){return!1===e.completed})});case Vt:return Ut({},e,{todos:e.todos.map(function(e){return Ut({},e,{completed:t.completed})})});default:return e}}function q(e){var t=e.slice(1)||"/";return{type:zt,path:t}}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments[1];switch(t.type){case zt:return Gt({},e,{path:t.path});default:return e}}function J(t){return t.todos.map(function(n){return e("li",{key:n.key,class:t.getTodoClassNames(n)},[e("#text",null,"\n\t\t\t"),e("div",{class:"view"},[e("#text",null,"\n\t\t\t\t"),e("input",se({onclick:Kt,class:"toggle",type:"checkbox"},n.completed&&"checked",n.completed&&"checked"),[]),e("#text",null,"\n\t\t\t\t"),e("label",{},[n.title]),e("#text",null,"\n\t\t\t\t"),e("button",{class:"destroy"},[]),e("#text",null,"\n\t\t\t")]),e("#text",null,"\n\n\t\t\t"),e("form",{class:"edit-todo"},[e("#text",null,"\n\t\t\t\t"),e("input",{onblur:t.stopEditing,value:n.title,class:"edit"},[]),e("#text",null,"\n\t\t\t")]),e("#text",null,"\n\t\t")])})}var Y=new Map,Q=new Map,X=new Map,Z=new Set;Z.CreateTreeHookCache=new Set,Z.CreateNodeHookCache=new Set,Z.SyncTreeHookCache=new Set;for(var $=Object.freeze({StateCache:Y,NodeCache:Q,TransitionCache:X,MiddlewareCache:Z}),ee=new Set,te=new Set,ne=new Set,oe={free:ee,allocated:te,protected:ne},re=0;re<1e4;re++)ee.add({rawNodeName:"",nodeName:"",nodeValue:"",nodeType:1,key:"",childNodes:[],attributes:{}});var ae=ee.values(),ie={size:1e4,memory:oe,get:function(){var e=ae.next(),t=e.value,n=void 0===t?{rawNodeName:"",nodeName:"",nodeValue:"",nodeType:1,key:"",childNodes:[],attributes:{}}:t;return e.done&&(ae=ee.values()),ee.delete(n),te.add(n),n},protect:function(e){te.delete(e),ne.add(e)},unprotect:function(e){ne.has(e)&&(ne.delete(e),ee.add(e))}},le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),se=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},de=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},fe=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},he=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},pe=Z.CreateTreeHookCache,ve=Array.isArray,ge="#document-fragment",me="undefined"!=typeof process?process:{env:{NODE_ENV:"development"}},ye=Z.CreateNodeHookCache,be="http://www.w3.org/2000/svg",Te=("object"===("undefined"==typeof global?"undefined":le(global))?global:window).document?document.createElement("div"):null,Ne=new Map,Ee="undefined"!=typeof location,xe="undefined"!=typeof process&&process.argv,we=function(){},ke=function(e,t){var n=Ee&&location.search.includes("diff_perf"),o=xe&&process.argv.includes("diff_perf");return n||o?function(n){e&&e.host?n=e.host.constructor.name+" "+n:"function"==typeof t.rawNodeName&&(n=t.rawNodeName.name+" "+n);var o=n+"-end";if(Ne.has(n)){var r=(performance.now()-Ne.get(n)).toFixed(3);Ne.delete(n),performance.mark(o),performance.measure("diffHTML "+n+" ("+r+"ms)",n,o)}else Ne.set(n,performance.now()),performance.mark(n)}:we},Ce=ie.memory,Oe=ie.protect,Se=ie.unprotect,je=Object.freeze({protectVTree:r,unprotectVTree:a,cleanMemory:i}),Ae=Object.assign({decodeEntities:n,escape:o,makeMeasure:ke,memory:je,Pool:ie,process:me},$),Re=Z.SyncTreeHookCache,_e={},Me=["old","new"],Ie=["attached","detached","replaced","attributeChanged","textChanged"];Ie.forEach(function(e){return X.set(e,new Set)});var De=new Set(["script","noscript","style","code","template"]),Pe=function(e,t){e.removeAttribute(t),t in e&&(e[t]=void 0)},Le=[l,c,u,d,g,m],He={schedule:l,shouldUpdate:c,reconcileTrees:u,syncTrees:d,patchNode:g,endAsPromise:m},Ve=function(){function e(t,n,o){ce(this,e),this.domNode=t,this.markup=n,this.options=o,this.state=Y.get(t)||{measure:ke(t,n)},this.tasks=[].concat(o.tasks),this.endedCallbacks=new Set,Y.set(t,this.state)}return ue(e,null,[{key:"create",value:function(t,n,o){return new e(t,n,o)}},{key:"renderNext",value:function(t){if(t.nextTransaction){var n=t.nextTransaction,o=t.nextTransaction.promises,r=o&&o[0];t.nextTransaction=void 0,n.aborted=!1,n.tasks.pop(),e.flow(n,n.tasks),o&&o.length>1?Promise.all(o.slice(1)).then(function(){return r.resolve()}):r&&r.resolve()}}},{key:"flow",value:function(e,t){for(var n=e,o=0;o<t.length;o++){if(e.aborted)return n;if(void 0!==(n=t[o](e))&&n!==e)return n}}},{key:"assert",value:function(e){}},{key:"invokeMiddleware",value:function(e){var t=e.tasks;Z.forEach(function(n){var o=n(e);o&&t.push(o)})}}]),ue(e,[{key:"start",value:function(){this.domNode;var t=this.state.measure,n=this.tasks,o=n.pop();return this.aborted=!1,e.invokeMiddleware(this),t("render"),n.push(o),e.flow(this,n)}},{key:"abort",value:function(){this.state;return this.aborted=!0,this.tasks[this.tasks.length-1](this)}},{key:"end",value:function(){var t=this,n=this.state,o=this.domNode,r=this.options,a=n.measure;r.inner;return a("finalize"),this.completed=!0,a("finalize"),a("render"),this.endedCallbacks.forEach(function(e){return e(t)}),this.endedCallbacks.clear(),n.previousMarkup=o.outerHTML,n.isRendering=!1,i(),e.renderNext(n),this}},{key:"onceEnded",value:function(e){this.endedCallbacks.add(e)}}]),e}(),Ue=Z.CreateTreeHookCache,Be=Z.CreateNodeHookCache,Fe=Z.SyncTreeHookCache,ze={VERSION:"1.0.0-beta-runtime",addTransitionState:f,removeTransitionState:h,release:T,createTree:e,use:N,outerHTML:b,innerHTML:y,html:e,defaultTasks:Le},Ge=Object.assign(Ae,ze,{defaultTasks:Le,tasks:He,createNode:t});ze.Internals=Ge,"function"==typeof devTools&&(N(devTools(Ge)),console.info("diffHTML DevTools Found and Activated..."));var We=Object.assign,qe=Object.keys,Ke={attributechanged:"attributeChanged",textchanged:"textChanged"},Je={attached:new Map,detached:new Map,replaced:new Map,attributechanged:new Map,textchanged:new Map},Ye=[];("undefined"!=typeof window?window:global).process=Ge.process;var Qe=new WeakMap,Xe=new WeakMap,Ze=Ge.NodeCache,$e=Object.assign;C.syncTreeHook=function(t,n){for(var o=0;o<n.childNodes.length;o++){var r=t&&t.childNodes&&t.childNodes[o],a=n.childNodes[o];if(a&&"function"==typeof a.rawNodeName){var i=a.rawNodeName,l=Xe.get(r),c=a.childNodes,u=$e({},a.attributes,{children:c}),s=i.prototype,d=r&&l instanceof i&&l,f=!d&&s&&new i(u),h=d||f,p=null;if(d?(d.componentWillReceiveProps(u),d.shouldComponentUpdate()&&(p=d.render(u,d.state))):p=e(h&&h.render?h.render(u,h.state):i(u)),!p)continue;return 11===p.nodeType?(n.childNodes=[].concat(p.childNodes),h&&(Qe.set(h,t),Xe.set(t,h))):(n.childNodes[o]=p,h&&(Qe.set(h,p),Xe.set(p,h))),n}}};var et,tt={shouldComponentUpdate:function(){return!0},componentWillReceiveProps:function(){},componentWillMount:function(){},componentDidMount:function(){},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidUnmount:function(){}},nt=Symbol("diff.render"),ot=new WeakMap,rt=Object.assign,at=Object.assign,it=Ge.NodeCache,lt=Object.keys,ct=Object.assign,ut=function(){return N(C)},st=ut(),dt=function(e){return at(e.prototype,tt,{forceUpdate:S,setState:O}),e}(function(){function e(e){var t=this.props=ct({},e),n=(this.state={},this.context={},this.constructor),o=n.defaultProps;void 0===o&&(o={});var r=n.propTypes;void 0===r&&(r={});var a=n.childContextTypes;void 0===a&&(a={});var i=n.contextTypes;void 0===i&&(i={});n.name;lt(o).forEach(function(e){e in t&&void 0!==t[e]||(t[e]=o[e])})}return e.subscribeMiddleware=function(){return ut()},e.unsubscribeMiddleware=function(){return st(),ut},e.prototype[nt]=function(){var e=this,t=Qe.get(this);b(it.get(t),this.render()).then(function(){e.componentDidUpdate()})},e}()),ft="object"==("undefined"==typeof global?"undefined":le(global))&&global&&global.Object===Object&&global,ht="object"==("undefined"==typeof self?"undefined":le(self))&&self&&self.Object===Object&&self,pt=(ft||ht||Function("return this")()).Symbol,vt=Object.prototype,gt=vt.hasOwnProperty,mt=vt.toString,yt=pt?pt.toStringTag:void 0,bt=Object.prototype.toString,Tt="[object Null]",Nt="[object Undefined]",Et=pt?pt.toStringTag:void 0,xt=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),wt="[object Object]",kt=Function.prototype,Ct=Object.prototype,Ot=kt.toString,St=Ct.hasOwnProperty,jt=Ot.call(Object),At=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(et="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),Rt={INIT:"@@redux/INIT"},_t=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var o=t[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Mt="ADD_TODO",It="REMOVE_TODO",Dt="TOGGLE_COMPLETION",Pt="START_EDITING",Lt="STOP_EDITING",Ht="CLEAR_COMPLETED",Vt="TOGGLE_ALL",Ut=Object.assign,Bt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},Ft={todos:JSON.parse(localStorage["diffhtml-todos"]||"[]"),getByStatus:function(e){return this.todos.filter(function(t){switch(e){case"active":return!t.completed;case"completed":return t.completed}return!0})}},zt="SET_HASH_STATE",Gt=Object.assign,Wt={path:location.hash.slice(1)||"/"},qt=L(function(){for(var e=arguments,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=e[o];return function(e){return function(t,o,r){var a=e(t,o,r),i=a.dispatch,l=[],c={getState:a.getState,dispatch:function(e){return i(e)}};return l=n.map(function(e){return e(c)}),i=L.apply(void 0,l)(a.dispatch),_t({},a,{dispatch:i})}}}(),window.devToolsExtension?window.devToolsExtension():function(e){return e})(I)(function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var r=t[o];"function"==typeof e[r]&&(n[r]=e[r])}var a,i=Object.keys(n);try{P(n)}catch(e){a=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(a)throw a;for(var o=!1,r={},l=0;l<i.length;l++){var c=i[l],u=n[c],s=e[c],d=u(s,t);if(void 0===d){var f=D(c,t);throw new Error(f)}r[c]=d,o=o||d!==s}return o?r:e}}({todoApp:W,url:K,lastAction:function(e,t){return t}}),{}),Kt=function(e){return e.stopPropagation()},Jt=function(t){function n(e){ce(this,n);var t=fe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.addTodo=function(e){e.preventDefault();var t=e.target.parentNode.querySelector(".new-todo");qt.dispatch(H(t.value)),t.value=""},t.removeTodo=function(e){if(e.target.matches(".destroy")){var t=e.target.parentNode.parentNode;qt.dispatch(V(t.key))}},t.toggleCompletion=function(e){if(e.target.matches(".toggle")){var t=e.target.parentNode.parentNode;qt.dispatch(U(t.key,e.target.checked))}},t.startEditing=function(e){if(e.target.matches("label")){var t=e.target.parentNode.parentNode;qt.dispatch(B(t.key)),t.querySelector("form input").focus()}},t.stopEditing=function(e){e.preventDefault();var t=e.target.parentNode,n="li"===t.nodeName.toLowerCase()?t:t.parentNode,o=n.querySelector(".edit").value.trim();o?qt.dispatch(F(n.key,o)):qt.dispatch(V(n.key))},t.clearCompleted=function(e){e.target.matches(".clear-completed")&&qt.dispatch(z())},t.toggleAll=function(e){e.target.matches(".toggle-all")&&qt.dispatch(G(e.target.checked))},t.handleKeyDown=function(e){if(e.target.matches(".edit, .new-todo"))switch(e.keyCode){case 27:var n=qt.getState()[t.props.reducer],o=e.target.parentNode.parentNode;e.target.value=n.todos.find(function(e){return e.key===o.key}).title,t.stopEditing(e);break;case 13:t.onSubmitHandler(Object.assign({},e,{preventDefault:function(){return e.preventDefault()},target:e.target.parentNode}))}},t.onSubmitHandler=function(e){e.preventDefault(),e.target.matches(".add-todo")?t.addTodo(e):e.target.matches(".edit-todo")&&t.stopEditing(e)},t.onClickHandler=function(e){e.target.matches(".destroy")?t.removeTodo(e):e.target.matches(".toggle-all")?t.toggleAll(e):e.target.matches(".clear-completed")&&t.clearCompleted(e)},t.getTodoClassNames=function(e){return[e.completed?"completed":"",e.editing?"editing":""].filter(Boolean).join(" ")},t.setCheckedState=function(){return qt.getState()[t.props.reducer].todos.filter(function(e){return!e.completed}).length?"":"checked"},t.getNavClass=function(e){return qt.getState().url.path===e?"selected":void 0},t.unsubscribeStore=qt.subscribe(function(){return t.forceUpdate()}),t}return de(n,t),ue(n,[{key:"render",value:function(){var t=qt.getState(),n=t[this.props.reducer],o=t.url.path.slice(1),r=n.todos,a=n.getByStatus(o),i=n.getByStatus("active"),l=n.getByStatus("completed");return localStorage["diffhtml-todos"]=JSON.stringify(r),[e("section",{class:"todoapp",onattached:this.animateAttached,ondetached:this.animateDetached,onsubmit:this.onSubmitHandler,onclick:this.onClickHandler,onkeydown:this.handleKeyDown,ondblclick:this.startEditing,onchange:this.toggleCompletion},[e("#text",null,"\n\n        "),e("header",{class:"header"},[e("#text",null,"\n          "),e("h1",{},[e("#text",null,"todos")]),e("#text",null,"\n\n          "),e("form",{class:"add-todo"},[e("#text",null,"\n            "),e("input",{class:"new-todo",placeholder:"What needs to be done?",autofocus:""},[]),e("#text",null,"\n          ")]),e("#text",null,"\n        ")]),r.length&&[e("section",{class:"main"},[e("#text",null,"\n            "),e("input",se({class:"toggle-all",id:"toggle-all",type:"checkbox"},this.setCheckedState(),this.setCheckedState()),[]),e("#text",null,"\n            "),e("label",{for:"toggle-all"},[e("#text",null,"Mark all as complete")]),e("#text",null,"\n\n            "),e("ul",{class:"todo-list"},[e("#text",null,"\n              "),e(J,{stopEditing:this.stopEditing,getTodoClassNames:this.getTodoClassNames,todos:a},[]),e("#text",null,"\n            }")]),e("#text",null,"\n          ")]),e("#text",null,"\n\n          "),e("footer",{class:"footer"},[e("#text",null,"\n            "),e("span",{class:"todo-count"},[e("#text",null,"\n              "),e("strong",{},[String(i.length)]),e("#document-fragment",null,[1==i.length?" item":" items",e("#text"," left\n            ")])]),e("#text",null,"\n\n            "),e("ul",{class:"filters"},[e("#text",null,"\n              "),e("li",{},[e("#text",null,"\n                "),e("a",{href:"#/",class:this.getNavClass("/")},[e("#text",null,"All")]),e("#text",null,"\n              ")]),e("#text",null,"\n              "),e("li",{},[e("#text",null,"\n                "),e("a",{href:"#/active",class:this.getNavClass("/active")},[e("#text",null,"Active")]),e("#text",null,"\n              ")]),e("#text",null,"\n              "),e("li",{},[e("#text",null,"\n                "),e("a",{href:"#/completed",class:this.getNavClass("/completed")},[e("#text",null,"Completed")]),e("#text",null,"\n              ")]),e("#text",null,"\n            ")]),l.length&&e("button",{class:"clear-completed",onclick:this.clearCompleted},[e("#text",null,"Clear completed")])])]]),e("#text",null,"\n\n      "),e("footer",{class:"info"},[e("#text",null,"\n        "),e("p",{},[e("#text",null,"Double-click to edit a todo")]),e("#text",null,"\n\n        "),e("p",{},[e("#text",null,"\n          Created by "),e("a",{href:"http://github.com/tbranyen"},[e("#text",null,"Tim Branyen")]),e("#text",null,"\n          using "),e("a",{href:"http://diffhtml.org"},[e("#text",null,"diffHTML 1.0")]),e("#text",null,"\n        ")]),e("#text",null,"\n\n        "),e("p",{},[e("#text",null,"Part of "),e("a",{href:"http://todomvc.com"},[e("#text",null,"TodoMVC")])]),e("#text",null,"\n      ")])]}}]),ue(n,[{key:"animateAttached",value:function(e,t){if(t.animate)return t.matches("footer.info")?new Promise(function(e){return t.animate([{opacity:0,transform:"scale(.5)"},{opacity:1,transform:"scale(1)"}],{duration:250}).onfinish=e}).then(function(){t.style.opacity=1}):t.matches(".todo-list li, footer.info")?new Promise(function(e){return t.animate([{opacity:0,transform:"scale(.5)"},{opacity:1,transform:"scale(1)"}],{duration:250}).onfinish=e}):t.matches(".todoapp")?new Promise(function(e){return t.animate([{opacity:0,transform:"translateY(100%)",easing:"ease-out"},{opacity:1,transform:"translateY(0)"}],{duration:375}).onfinish=e}):void 0}},{key:"animateDetached",value:function(e,t){if(t.animate)return t.matches(".todo-list li")?new Promise(function(e){return t.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(.5)"}],{duration:250}).onfinish=e}):void 0}}]),n}(dt);N(function(e){void 0===e&&(e={});var t=function(e,t,n,o){if("on"===t.toLowerCase().slice(0,2)){t=t.toLowerCase().slice(2);var r=Je[t],a="function"==typeof o;!r||o&&!a||r[a?"set":"delete"](e,o)}};return We(function(){},{subscribe:function(){f("attributeChanged",t),qe(Je).forEach(function(e){var t=Je[e],n=Ke[e]||e,o=function(e){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];if(t.size){if(t.has(e))return t.get(e).apply(void 0,[e,e].concat(n));var r=[];return t.forEach(function(t,o){o.contains(e)&&r.push(t.apply(e,[o].concat(e,n)))}),r.some(function(e){return Boolean(e&&e.then)})?Promise.all(r):void 0}};Ye.push(o),f(n,o)})},unsubscribe:function(){h("attributeChanged",t),qe(Je).forEach(function(e){var t=Je[e];h(Ke[e]||e,Ye.shift()),t.clear()}),Ye.length=0}})}());var Yt=function(e){return qt.dispatch(q(e))};y(document.querySelector("todo-app"),e(Jt,{reducer:"todoApp"},[])),window.onhashchange=function(e){return Yt(location.hash)}});